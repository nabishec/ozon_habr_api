# üìù Ozon Habr API

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç API –¥–ª—è –æ–∑–æ–Ω–∞ –Ω–∞ –ø–æ–¥–æ–±–∏–µ —Ö–∞—Ä–±—Ä–∞. –û–Ω –ø–æ–∑–≤–æ–ª–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–æ—Å—Ç–∞–º–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏, –∏—Å–ø–æ–ª—å–∑—É—è GraphQL. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–∏–µ–º/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –¥–ª—è –ø–æ—Å—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Docker –∏ Docker Compose.

* –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```
git clone https://github.com/nabishec/ozon_habr_api.git
cd ozon_habr_api
```
**–í —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —á—Ç–æ–±s—ã —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –±—ã–ª–æ in-memory —Ç–æ –≤ Dockerfile –Ω–∞–¥–æ –∏–∑–º–µ–Ω–∏—Ç—å**

[`RUN go build -o main ./cmd/main.go`](Dockerfile#L7)

**–Ω–∞**

`RUN go build -o main ./cmd/main.go`

* –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å –ø–æ–º–æ—â—å—é Docker Compose:
```
docker-compose up
```
* –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É:
```
http://localhost:8080
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: 
* **http://localhost:8080/graphql**

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—ã–µ GraphQL –∫–ª–∏–µ–Ω—Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä Insomnia –∏–ª–∏ GraphiQL.

## üõ† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ä–µ—à–µ–Ω–∏—è

–í –¥–∞–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ—Å—Ç–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–∞–≥–∏–Ω–∞—Ü–∏–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö. 
    
–ö—Ä–æ–º–µ —Ç–æ–≥–æ:     
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º—ã –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø—É—Ç–µ–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ –∏—Ö –æ—Ç–≤–µ—Ç–æ–≤.
Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ 15 –º–∏–Ω—É—Ç, —á—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã –∑–∞ —Å—á–µ—Ç —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
## üìÅ –°—Ç—Ä—É–∫—Ç—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

ozon_habr_api/<br>
‚îú‚îÄ‚îÄ cmd/<br>
‚îÇ   ‚îú‚îÄ‚îÄ db_connection/<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cache.go                # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.go             # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL<br>
‚îÇ   ‚îú‚îÄ‚îÄ server/<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.go               # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫ GraphQL —Å–µ—Ä–≤–µ—Ä–∞<br>
‚îÇ   ‚îî‚îÄ‚îÄ main.go                     # –û—Å–Ω–æ–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è<br>
‚îú‚îÄ‚îÄ graph/<br>
‚îÇ   ‚îú‚îÄ‚îÄ model/<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models_gen.go           # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ GraphQL –º–æ–¥–µ–ª–∏<br>
‚îÇ   ‚îú‚îÄ‚îÄ generated.go                # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ GraphQL (gqlgen)<br>
‚îÇ   ‚îú‚îÄ‚îÄ resolver.go                 # –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∑–æ–ª–≤–µ—Ä—ã GraphQL<br>
‚îÇ   ‚îú‚îÄ‚îÄ schema.graphqls             # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ GraphQL —Å—Ö–µ–º—ã<br>
‚îÇ   ‚îî‚îÄ‚îÄ schema.resolvers.go         # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑–æ–ª–≤–µ—Ä–æ–≤ GraphQL<br>
‚îú‚îÄ‚îÄ internal/<br>
‚îÇ   ‚îú‚îÄ‚îÄ handlers/<br>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ comment/                # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ª–æ–≥–∏–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤<br>
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ interface.go        # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º—É—Ç–∞—Ü–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤<br>
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mutations.go        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º—É—Ç–∞—Ü–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ post_mutation/          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ª–æ–≥–∏–∫–∏ –ø–æ—Å—Ç–æ–≤<br>
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ interface.go        # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º—É—Ç–∞—Ü–∏–π –ø–æ—Å—Ç–æ–≤<br>
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ mutations.go        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º—É—Ç–∞—Ü–∏–π –ø–æ—Å—Ç–æ–≤<br>
‚îÇ   ‚îú‚îÄ‚îÄ model/<br>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ model.go                # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö<br>
‚îÇ   ‚îî‚îÄ‚îÄ storage/<br>
‚îÇ       ‚îú‚îÄ‚îÄ interface.go            # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL, in-memory)<br>
‚îÇ       ‚îú‚îÄ‚îÄ db/<br>
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ resolvers.go        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL<br>
‚îÇ       ‚îî‚îÄ‚îÄ in-memory/<br>
‚îÇ           ‚îî‚îÄ‚îÄ resolvers.go        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏<br>
‚îú‚îÄ‚îÄ migrations/<br>
‚îÇ   ‚îî‚îÄ‚îÄ 001_create_tables.up.sql    # SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü)<br>
‚îú‚îÄ‚îÄ tools/<br>
‚îÇ    ‚îî‚îÄ‚îÄ tools.go                   # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ gqlgen<br>
‚îú‚îÄ‚îÄ .env                            # –§–∞–π–ª —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, Redis –∏ —Ç.–¥.)<br>
‚îú‚îÄ‚îÄ .gitignore                      # –°–ø–∏—Å–æ–∫ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è Git<br>
‚îú‚îÄ‚îÄ docker-compose.yml              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker Compose –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π<br>
‚îú‚îÄ‚îÄ Dockerfile                      # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Å–±–æ—Ä–∫–∏ Docker –æ–±—Ä–∞–∑–∞<br>
‚îú‚îÄ‚îÄ go.mod                          # –§–∞–π–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Go<br>
‚îú‚îÄ‚îÄ go.sum                          # –§–∞–π–ª —Å –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–º–∏ —Å—É–º–º–∞–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Go<br>
‚îú‚îÄ‚îÄ gqlgen.yml                      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è gqlgen<br>
‚îú‚îÄ‚îÄ LICENSE                         # –õ–∏—Ü–µ–Ω–∑–∏—è –ø—Ä–æ–µ–∫—Ç–∞<br>
‚îî‚îÄ‚îÄ README.md                       # –§–∞–π–ª —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞<br>



## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

## üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
## üìú –õ–∏—Ü–µ–Ω–∑–∏—è
